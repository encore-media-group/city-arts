"use strict";(function(){var c;c=jQuery,Backbone,_,window.WC_Memberships_Modal_View=c.WCBackboneModal.View.extend({constructor:function(e){var t;return(e=e||{}).target=this.template_id||e.template_id,e.string=e.data,(t=Array.prototype.slice.call(arguments,1)).unshift(e),WC_Memberships_Modal_View.__super__.constructor.apply(this,t)},render:function(){var e,r;return c("#wc-backbone-modal-dialog .modal-close").trigger("click"),e=wp.template(this._target),this.$el.append(e(this._string)),c(document.body).css({overflow:"hidden"}).append(this.$el),this.resizeContent(),this.$(".wc-backbone-modal-content").attr("tabindex","0").focus(),c(document.body).trigger("init_tooltips"),c(document.body).trigger("wc_backbone_modal_loaded",this._target),r=this,c("#btn-close").on("click",function(e){return e.preventDefault(),r.close()}),c("#btn-stop").on("click",function(e){return e.preventDefault(),r.removeJob(c(this).data("job-name"),c(this).data("job-id"),!0)}),c("document, body").on("wc_backbone_modal_before_remove",function(e,t){var o,n,i;if(i=(o=c("#"+t+"-job"))?o.data("name"):null,n=o?o.data("id"):null,i&&n)return r.removeJob(i,n,!1)})},is_blocked:function(){return this.$(".wc-backbone-modal-content").is(".processing")||this.$(".wc-backbone-modal-content").parents(".processing").length},block:function(){if(!this.is_blocked())return this.$(".wc-backbone-modal-content").addClass("processing").block({message:null,overlayCSS:{background:"#fff",opacity:.6}})},unblock:function(){return this.$(".wc-backbone-modal-content").removeClass("processing").unblock()},closeButton:function(e){if(e.preventDefault(),!(this._string&&this._string.job&&("completed"!==this._string.job.status||this._string.job.percentage&&100!==parseInt(this._string.job.percentage,10))))return c(document.body).trigger("wc_backbone_modal_before_remove",this._target),this.undelegateEvents(),this.close()},close:function(){return c(document).off("focusin"),c(document.body).css({overflow:"auto"}),this.remove()},removeJob:function(e,t,o){var n;return n={action:"wc_memberships_remove_batch_job",security:wc_memberships_admin.remove_memberships_batch_job_nonce,job_name:e,job_id:t},c.post(wc_memberships_admin.ajax_url,n,function(e){if(window.onbeforeunload=null,e.success&&o)return location.reload()})}})}).call(void 0);