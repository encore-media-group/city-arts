"use strict";(function(){jQuery(document).ready(function(d){var l,u,h,e,s,f;return f=null!=(e=window.wc_memberships_admin)?e:{},u=function(e){return{type:e.split("|")[0],name:e.split("|")[1]}},l=function(e){var s;switch(s={},e.type){case"taxonomy":s.action="wc_memberships_json_search_terms",s.security=f.search_terms_nonce,s.taxonomy=e.name;break;case"post_type":s.action="product"===e.name?"woocommerce_json_search_products_and_variations":"wc_memberships_json_search_posts",s.security="product"===e.name?f.search_products_nonce:f.search_posts_nonce,s.post_type=e.name}return s},h=function(i){var n;return n=0,d("table."+i+"-rules tbody."+i+"-rule").each(function(e,s){if(!d(s).hasClass(i+"-rule-__INDEX__"))return d(s).removeClass(function(e,s){var t,n;if(n=new RegExp(i+"-rule-[0-9]","g"),t=s.match(n))return t[0]}),d(s).addClass(i+"-rule-"+n),d("input, select, textarea",s).each(function(e,s){var t;if((t=jQuery(s)).attr("name"))return t.attr("name",t.attr("name").replace(/\[([^[]*)\]/,"["+n+"]"))}),n++})},s=function(e){var s,t,n,i;if(i="INPUT"===(n=d(e).get(0).tagName)?d('input[type="radio"][name="'+d(e).attr("name")+'"]:checked').val():d(e).val(),s=d(e).closest(".rule"),"immediate"===i){if(s.find(".js-show-if-access-schedule-immediate").removeClass("hide"),s.find(".js-hide-if-access-schedule-immediate").addClass("hide"),"SELECT"===n)return s.find(".js-access-schedule-period-selector").val(i).first().focus()}else if(s.find(".js-show-if-access-schedule-immediate").addClass("hide"),s.find(".js-hide-if-access-schedule-immediate").removeClass("hide"),"SELECT"!==n||d(e).hasClass("access_schedule-period")||s.find(".access_schedule-period").find("option").removeAttr("selected"),(t=s.find(".access_schedule-amount")).val()||t.val(1),d(e).hasClass("js-schedule-type"))return t.focus()},f.initializeRuleset=function(r){var a,o;return o=".js-object-ids",(a=d("."+r+"-rules")).on("change",".js-content-type",function(e){var s,t,n;return n=l(u(d(this).val())),s=d(this).closest("tr").find(o),d(s).removeData("selected").val("").select2("destroy"),t="3.5.3"===f.select2_version?d(this).closest("tr").find("input.js-object-ids"):s,f.initializeEnhancedSelect(t,n)}),a.on("change",".js-access-schedule-period-selector",function(e){return s(this)}),a.find(o).each(function(){var e,s;if(!d(this).closest("tbody").hasClass(r+"-rule-__INDEX__"))return s=d(this).closest("tbody").find(".js-content-type").get(0).value,e=l(u(s)),f.initializeEnhancedSelect(this,e)}),a.find(".js-add-rule").click(function(){var e,s,t,n,i,c;return t=a.find("."+r+"-rule-__INDEX__"),i=a.children("tbody").length-1,e=d(t.prop("outerHTML").replace(/__INDEX__/g,i)),t.before(e),(s=e.find("select.membership-plan"))&&s.select2(),e.find(".js-content-type").length&&(n=e.find(".js-content-type").get(0).value,c=l(u(n)),f.initializeEnhancedSelect(e.find(o),c)),a.find(".norules").addClass("hide"),a.find("tfoot .js-remove-rules").removeClass("hide"),h(r)}),a.find(".js-remove-rules").click(function(){var e;return e=a.find('th.check-column input[type="checkbox"]:checked'),d.when(e.closest("tbody").fadeOut(400,function(){var e;return(e=d(this)).find(".js-rule-id").val()?e.addClass("hide").find(".js-rule-remove").val(1):setTimeout(function(){return e.remove()},1)})).then(function(){return a.find(".rule:visible").length<1&&(a.find(".norules").removeClass("hide"),a.find(".js-remove-rules").addClass("hide")),a.find('th.check-column input[type="checkbox"]').removeAttr("checked"),h(r)})})}})}).call(void 0);